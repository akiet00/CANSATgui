<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>SWERVE TEAM- CANSAT 2017</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="chartStyles.css">
    <!-- Insert this line above script imports  -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <!-- PLOTLY library -->
    <script src="https://cdn.plvelot.ly/plotly-latest.min.js"></script>
    <!--D3 library-->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- BOOTSTRAP library-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <!-- HIGHCHARTS JS-->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <!--HIGHCHARTS exporting
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
  -->
    <!-- Insert this line after script imports -->
    <script>if (window.module) module = window.module;</script>
  </head>
  <body>
    <div class="team-name">
      <div style="grid-column:1/3;color:white;font-size:24px;">University of Minnesota, Twin Cities</div>
      <img src="resources/logo.png" style="height:40px;width:auto;grid-column:3/3">
    </div>

    <div class="grid">
      <div class="plot-area">
        <h4 class="plot-label">Altitude</h4>
        <div class="graph" id="alt-time"></div> <!--Altitude plot-->
      </div> <!-- END OF ALT-TIME BLOCK-->

      <div class="plot-area">
        <h4 class="plot-label">Velocity</h4>
        <div class="graph" id="pressure-time"></div> <!--Pressure vs. time plot-->

      </div> <!-- END OF PRESSSURE-TIME BLOCK-->

      <!--VOLTAGE BLOCK-->
      <div class="plot-area voltage-div">
        <h4 class="plot-label">Current Voltage</h4>
        <div class="voltage-wrapper">
            <div class="voltage-label">80%</div>
            <div class="voltageBlock">
              <div class="bar"></div>
            </div><!-- Voltage progress bar-->
        </div>
      </div> <!-- END OF VELOCITY-TIME BLOCK-->

      <div class="plot-area">
        <h4 class="plot-label">Temperature</h4>
        <div class="graph" id="temperature-time"></div> <!--Temperature vs. time plot-->
      </div> <!-- END OF TEMPERATURE-TIME BLOCK-->

      <div class="plot-area">
        <h4 class="plot-label">Pressure</h4>
        <div class="graph" id="vel-time"></div><!-- Velocity vs. time plot-->
      </div> <!-- END OF VELOCITY-TIME BLOCK-->


<script>
window.onload = function(){
  /*Append progress bar elements into voltageBlock div*/
  function appendHtml(el, str) {
    var div = document.createElement('div');
    div.innerHTML = str;
    while (div.children.length > 0) {
      el.appendChild(div.children[0]);
    }
  }
  var progBarDivs = "<div class='voltage-wrapper'><div class='voltage-label'>80%</div><div class='voltageBlock'><div class='bar'></div></div></div>";
  appendHtml(document.getElementsByClassname('voltage-div'),proBarDivs);


  function update(val){
    var progBar = document.getElementsByClassname('bar');
    var curWidth = progBar[0].offsetWidth;
    console.print('Current width is '+ curWidth)
    progBar[0].style.width = (val/curWidth)*100 + '%';
  }
  update(95);
}
</script>
      <div class="control-area">
        <!-- COM port connections + Start/stop buttons + other control buttons goes here-->
        <div class="dropdown">
          <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">COM PORTS
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li>COM1</li>
            <li>COM2</li>
            <li>COM3</li>
          </ul>
        </div> <!-- END OF COM PORT DROPDOWN MENU-->
        <div class="control-btn-block">
          <span class="btn start-btn" onclick="updateStatus('starting...')">START &rarr;</span>
          <span class="btn stop-btn">STOP &#9983;</span>
          <span class="btn white-btn">SAVE DATA</span>
        </div> <!-- END OF START/STOP BUTTONS-->
        <textarea id="status-box">Current Status...</textarea>
      </div> <!-- END OF CONTROL BLOCK-->
    </div> <!-- END OF WRAPPER -->
</div>
    <script>
      // You can also require other files to run in this process
      require('./renderer.js');
      require('./javascripts/plots.js');
      //require('./javascripts/status.js');
      require('./javascripts/voltageIndicator.js');
    </script>
  </body>
</html>
